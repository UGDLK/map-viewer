<!DOCTYPE html>
<html>
<head>
  <title>Player Tracking Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
</head>
<body>
  <div id="map" style="height: 600px;"></div>
  
  <script>
    // Initialize the map (adjust coordinates and zoom as needed)
    var map = L.map('map').setView([0, 0], 2);

    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
    }).addTo(map);

    // Function to fetch player positions from the API
    async function fetchPlayerPositions() {
        try {
            const response = await fetch('https://api.earthmc.net/v3/aurora/players/'); // Replace with the actual API URL
            const players = await response.json();

            players.forEach(player => {
                const { name, x, z } = player.position; // Adjust keys based on the API structure
                L.marker([x, z]).addTo(map).bindPopup(`${name} is here!`);
            });

        } catch (error) {
            console.error('Error fetching player data:', error);
        }
    }

    // Update player positions every 5 seconds
    setInterval(fetchPlayerPositions, 5000);

    // Initial load
    fetchPlayerPositions();
  </script>
</body>
</html>
